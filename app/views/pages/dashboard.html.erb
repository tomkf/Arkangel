





<div class="big_title">
  <div class="container">
    <h3>Your <b>Health Score</b></h3>
<% unless @health_score.nil? %>
    <div class="score d-flex align-items-end" id="main_title">
      <h1><%= @health_score.round(1) %></h1>
      <h2>/100</h2>
    </div>
    <%= link_to "Score history", graph_path, style:"color: white;" %>
<% end %>
  </div>
</div>

<% if @health_score.nil? %>
  <div class="container">
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModal">
        Please connect your Fitbit!
        </button>

        <!-- Modal -->
      <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Fitbit not found</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
             No Fitbit detected!
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Connect your Fitbit</button>
            </div>
          </div>
        </div>
      </div>
      </div>
</div>

<% else %>
<!-- classifier -->

<% great_array = @feedback.select { |component| component[3] == "great" } %>
<% average_array = @feedback.select { |component| component[3] == "average" } %>
<% low_array = @feedback.select { |component| component[3] == "low" } %>


<!-- columns -->

<div class="container" style="margin-bottom: 12vh">
  <div class="row mr-3 ml-3">

    <!-- feedback -->
    <div class="great col-sm-12 col-md-12 col-lg-4 mt-3">
      <!-- GREAT  -->
      <%= render "shared/title_great" %>
      <% great_array.each do |info| %>
        <%= render "shared/component_info", info: info %>
      <% end %>
    </div>

    <div class="average col-sm-12 col-md-12 col-lg-4 mt-3">
      <!-- AVERAGE  -->
      <%= render "shared/title_average" %>
      <% average_array.each do |info| %>
        <%= render "shared/component_info", info: info %>
      <% end %>
    </div>

    <div class="low col-sm-12 col-md-12 col-lg-4 mt-3 ">
      <!-- LOW  -->
      <%= render "shared/title_low" %>
      <% low_array.each do |info| %>
        <%= render "shared/component_info", info: info %>
      <% end %>
    </div>

  </div>

<% end %>

</div>
<%= render "shared/footer" %>
